<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Drag and Drop Entre Se√ß√µes dos T√©cnicos</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .test-header {
            background: #f1f5f9;
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .test-header h1 {
            margin: 0;
            color: #1e293b;
            font-size: 24px;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
        }
        
        .test-section h2 {
            color: #475569;
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .feature-section {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .feature-section h3 {
            margin: 0 0 10px 0;
            color: #16a34a;
            font-size: 16px;
        }
        
        .debug-section {
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .debug-section h4 {
            margin: 0 0 10px 0;
            color: #334155;
        }
        
        .debug-code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .status-implemented {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-testing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .test-button:hover {
            background: #2563eb;
        }
        
        .test-button.secondary {
            background: #64748b;
        }
        
        .test-button.secondary:hover {
            background: #475569;
        }
        
        .flow-diagram {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .flow-diagram h4 {
            margin: 0 0 15px 0;
            color: #1e293b;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
        }
        
        .flow-arrow {
            margin: 0 15px;
            color: #64748b;
            font-weight: bold;
        }
        
        .flow-section {
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 14px;
        }
        
        .section-previsto-hoje {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .section-previsto-amanha {
            background: #fef3c7;
            color: #92400e;
        }
        
        .section-futura {
            background: #dcfce7;
            color: #166534;
        }
        
        .section-em-servico {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }
        
        .comparison-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
        }
        
        .comparison-table td {
            color: #6b7280;
        }
        
        .comparison-table .success {
            background: #f0fdf4;
        }
        
        .comparison-table .info {
            background: #eff6ff;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üîÑ Teste - Drag and Drop Entre Se√ß√µes dos T√©cnicos</h1>
        </div>
        
        <div class="test-content">
            <div class="test-section">
                <h2>Funcionalidades Implementadas</h2>
                
                <div class="feature-section">
                    <h3>‚úÖ 1. PREVISTO PARA HOJE ‚Üí PREVISTO PARA AMANH√É</h3>
                    <p><strong>Status:</strong> Atualiza√ß√£o "Para atender no pr√≥ximo dia"</p>
                    <p><strong>Configura√ß√£o:</strong> Usa status configurado nas configura√ß√µes de processos</p>
                </div>
                
                <div class="feature-section">
                    <h3>‚úÖ 2. PREVISTO PARA AMANH√É ‚Üí PREVISTO PARA HOJE</h3>
                    <p><strong>Status:</strong> Atualiza√ß√£o "Encaminhado ao t√©cnico"</p>
                    <p><strong>Configura√ß√£o:</strong> Usa status configurado nas configura√ß√µes de processos</p>
                </div>
                
                <div class="feature-section">
                    <h3>‚úÖ 3. PREVISTO PARA AMANH√É ‚Üí FUTURA</h3>
                    <p><strong>Status:</strong> Atualiza√ß√£o "Em dia ou futura"</p>
                    <p><strong>Configura√ß√£o:</strong> Usa status configurado nas configura√ß√µes de processos</p>
                </div>
                
                <div class="feature-section">
                    <h3>‚úÖ 4. PREVISTO PARA HOJE ‚Üí FUTURA</h3>
                    <p><strong>Status:</strong> Atualiza√ß√£o "Em dia ou futura"</p>
                    <p><strong>Configura√ß√£o:</strong> Usa status configurado nas configura√ß√µes de processos</p>
                </div>
                
                <div class="feature-section">
                    <h3>‚úÖ 5. FUTURA ‚Üí PREVISTO PARA HOJE</h3>
                    <p><strong>Status:</strong> Atualiza√ß√£o "Encaminhado ao t√©cnico"</p>
                    <p><strong>Configura√ß√£o:</strong> Usa status configurado nas configura√ß√µes de processos</p>
                </div>
                
                <div class="feature-section">
                    <h3>‚úÖ 6. FUTURA ‚Üí PREVISTO PARA AMANH√É</h3>
                    <p><strong>Status:</strong> Atualiza√ß√£o "Para atender no pr√≥ximo dia"</p>
                    <p><strong>Configura√ß√£o:</strong> Usa status configurado nas configura√ß√µes de processos</p>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Diagrama de Fluxo</h2>
                
                <div class="flow-diagram">
                    <h4>üîÑ Movimenta√ß√µes Permitidas</h4>
                    
                    <div class="flow-step">
                        <div class="flow-section section-previsto-hoje">PREVISTO PARA HOJE</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-section section-previsto-amanha">PREVISTO PARA AMANH√É</div>
                        <div class="flow-arrow">(Para atender no pr√≥ximo dia)</div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="flow-section section-previsto-amanha">PREVISTO PARA AMANH√É</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-section section-previsto-hoje">PREVISTO PARA HOJE</div>
                        <div class="flow-arrow">(Encaminhado ao t√©cnico)</div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="flow-section section-previsto-amanha">PREVISTO PARA AMANH√É</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-section section-futura">FUTURA</div>
                        <div class="flow-arrow">(Em dia ou futura)</div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="flow-section section-previsto-hoje">PREVISTO PARA HOJE</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-section section-futura">FUTURA</div>
                        <div class="flow-arrow">(Em dia ou futura)</div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="flow-section section-futura">FUTURA</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-section section-previsto-hoje">PREVISTO PARA HOJE</div>
                        <div class="flow-arrow">(Encaminhado ao t√©cnico)</div>
                    </div>
                    
                    <div class="flow-step">
                        <div class="flow-section section-futura">FUTURA</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-section section-previsto-amanha">PREVISTO PARA AMANH√É</div>
                        <div class="flow-arrow">(Para atender no pr√≥ximo dia)</div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: #fee2e2; border-radius: 4px; color: #991b1b;">
                        <strong>‚ö†Ô∏è Restri√ß√£o:</strong> N√£o √© permitido arrastar para "EM SERVI√áO"
                    </div>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Mapeamento de Status</h2>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Se√ß√£o de Destino</th>
                            <th>Status no Banco</th>
                            <th>Configura√ß√£o</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="success">
                            <td><strong>PREVISTO PARA HOJE</strong></td>
                            <td>Encaminhado ao t√©cnico</td>
                            <td>status_forward</td>
                            <td>Ordens que devem ser atendidas hoje</td>
                        </tr>
                        <tr class="success">
                            <td><strong>PREVISTO PARA AMANH√É</strong></td>
                            <td>Para atender no pr√≥ximo dia</td>
                            <td>status_tomorrow</td>
                            <td>Ordens agendadas para amanh√£</td>
                        </tr>
                        <tr class="success">
                            <td><strong>FUTURA</strong></td>
                            <td>Em dia ou futura</td>
                            <td>status_uptodate</td>
                            <td>Ordens em dia ou futuras</td>
                        </tr>
                        <tr class="info">
                            <td><strong>EM SERVI√áO</strong></td>
                            <td>Em servi√ßo</td>
                            <td>status_inservice</td>
                            <td>Ordens em execu√ß√£o (n√£o permite drag)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="test-section">
                <h2>Implementa√ß√£o T√©cnica</h2>
                
                <div class="debug-section">
                    <h4>üîß Detec√ß√£o de Drag Entre Se√ß√µes</h4>
                    <div class="debug-code">
// Verificar se √© um drop entre se√ß√µes do mesmo t√©cnico
const fromTechnician = e.dataTransfer.getData('fromTechnician');
const fromGroup = e.dataTransfer.getData('fromGroup');

if (fromTechnician === 'true' && fromGroup && fromGroup !== groupName) {
  // √â um drop entre se√ß√µes do mesmo t√©cnico
  handleDropBetweenTechnicianSections(technician, fromGroup, groupName);
} else {
  // √â um drop da coluna "Em aberto" para o t√©cnico
  handleDropToTechnique(technician, groupName);
}
                    </div>
                </div>
                
                <div class="debug-section">
                    <h4>üîß Dados de Transfer√™ncia</h4>
                    <div class="debug-code">
onDragStart={(e) => {
  e.dataTransfer.setData('orderId', ordem.id);
  e.dataTransfer.setData('fromTechnician', 'true');
  e.dataTransfer.setData('fromGroup', groupName);
  console.log(`üìã Dados: orderId=${ordem.id}, fromTechnician=true, fromGroup=${groupName}`);
}}
                    </div>
                </div>
                
                <div class="debug-section">
                    <h4>üîß Fun√ß√£o de Movimenta√ß√£o</h4>
                    <div class="debug-code">
const handleDropBetweenTechnicianSections = async (technicianName, fromGroup, toGroup) => {
  // N√£o permitir drop no grupo "Em servi√ßo"
  if (toGroup === 'Em servi√ßo') {
    console.log('‚ùå N√£o √© permitido arrastar para "Em servi√ßo"');
    return;
  }
  
  // Fazer chamada da API para atualizar status
  const requestPayload = {
    orderIds: selectedOrders,
    targetSection: toGroup,
    technicianId: technicianId
  };
  
  // Atualizar estado local ap√≥s sucesso
  // Mover ordens entre se√ß√µes
}
                    </div>
                </div>
                
                <div class="debug-section">
                    <h4>üîß Atualiza√ß√£o do Estado Local</h4>
                    <div class="debug-code">
// Encontrar e mover as ordens entre as se√ß√µes
selectedOrders.forEach(orderId => {
  // Remover da se√ß√£o de origem
  newTechnicianGroups[technicianName][fromGroup] = 
    newTechnicianGroups[technicianName][fromGroup].filter(
      order => order.id !== orderId
    );
  
  // Adicionar √† se√ß√£o de destino
  newTechnicianGroups[technicianName][toGroup].push(orderToMove);
});

setTechnicianGroups(newTechnicianGroups);
                    </div>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Como Testar</h2>
                
                <div class="debug-section">
                    <h4>üß™ Teste 1: Movimenta√ß√£o B√°sica</h4>
                    <ul>
                        <li>1. Abrir frontend do PainelOS</li>
                        <li>2. Ir para tela Board</li>
                        <li>3. Aplicar filtros para colunas de t√©cnicos</li>
                        <li>4. Selecionar ordens em "PREVISTO PARA HOJE"</li>
                        <li>5. Arrastar para "PREVISTO PARA AMANH√É"</li>
                        <li>6. Verificar se modal de confirma√ß√£o aparece</li>
                        <li>7. Verificar se ordens foram movidas</li>
                    </ul>
                </div>
                
                <div class="debug-section">
                    <h4>üß™ Teste 2: Todas as Movimenta√ß√µes</h4>
                    <ul>
                        <li>1. Testar cada uma das 6 movimenta√ß√µes permitidas</li>
                        <li>2. Verificar se status correto √© aplicado</li>
                        <li>3. Verificar se modal mostra informa√ß√µes corretas</li>
                        <li>4. Verificar se estado local √© atualizado</li>
                    </ul>
                </div>
                
                <div class="debug-section">
                    <h4>üß™ Teste 3: Restri√ß√µes</h4>
                    <ul>
                        <li>1. Tentar arrastar para "EM SERVI√áO"</li>
                        <li>2. Verificar se opera√ß√£o √© bloqueada</li>
                        <li>3. Verificar logs no console</li>
                    </ul>
                </div>
                
                <div class="debug-section">
                    <h4>üß™ Teste 4: M√∫ltiplas Ordens</h4>
                    <ul>
                        <li>1. Selecionar m√∫ltiplas ordens</li>
                        <li>2. Arrastar entre se√ß√µes</li>
                        <li>3. Verificar se todas foram processadas</li>
                        <li>4. Verificar modal com resultados individuais</li>
                    </ul>
                </div>
                
                <button class="test-button" onclick="window.open('http://localhost:3000', '_blank')">
                    üåê Abrir Frontend
                </button>
                
                <button class="test-button secondary" onclick="openDevTools()">
                    üîß Abrir DevTools
                </button>
            </div>
            
            <div class="test-section">
                <h2>Status dos Testes</h2>
                
                <div class="debug-section">
                    <h4>üîç Verifica√ß√µes Necess√°rias</h4>
                    <ul>
                        <li>
                            <strong>Detec√ß√£o de drag entre se√ß√µes:</strong>
                            <span class="status-indicator status-implemented">‚úÖ Implementado</span>
                        </li>
                        <li>
                            <strong>Movimenta√ß√£o PREVISTO HOJE ‚Üí AMANH√É:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Movimenta√ß√£o AMANH√É ‚Üí HOJE:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Movimenta√ß√£o AMANH√É ‚Üí FUTURA:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Movimenta√ß√£o HOJE ‚Üí FUTURA:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Movimenta√ß√£o FUTURA ‚Üí HOJE:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Movimenta√ß√£o FUTURA ‚Üí AMANH√É:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Bloqueio EM SERVI√áO:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Modal de feedback:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                        <li>
                            <strong>Atualiza√ß√£o do estado local:</strong>
                            <span class="status-indicator status-testing">üß™ Testar</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Logs Esperados</h2>
                
                <div class="debug-section">
                    <h4>üìã Logs de Drag Start</h4>
                    <div class="debug-code">
üîÑ Iniciando drag da ordem 123456 das colunas de t√©cnicos
‚úÖ Selecionando ordem 123456 para drag
üìã Dados de transfer√™ncia definidos: orderId=123456, fromTechnician=true, fromGroup=PREVISTO PARA HOJE
                    </div>
                </div>
                
                <div class="debug-section">
                    <h4>üìã Logs de Drop</h4>
                    <div class="debug-code">
üéØ Movendo 1 ordens do t√©cnico "Jo√£o Silva" de "PREVISTO PARA HOJE" para "PREVISTO PARA AMANH√É"
üîç ID do t√©cnico "Jo√£o Silva": 123
‚úÖ Status atualizado no banco: Ordens atualizadas com sucesso
üîç Movendo ordens entre se√ß√µes...
‚úÖ Encontrada ordem 123456 na se√ß√£o PREVISTO PARA HOJE
üìä Resultados processados: [{orderId: "123456", status: "success", ...}]
                    </div>
                </div>
                
                <div class="debug-section">
                    <h4>üìã Logs de Erro (EM SERVI√áO)</h4>
                    <div class="debug-code">
‚ùå N√£o √© permitido arrastar para "Em servi√ßo"
                    </div>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Resultado Esperado</h2>
                
                <div class="debug-section">
                    <h4>‚úÖ Funcionalidade Completa</h4>
                    <ul>
                        <li><strong>Detec√ß√£o:</strong> Sistema detecta drag entre se√ß√µes do mesmo t√©cnico</li>
                        <li><strong>Movimenta√ß√£o:</strong> Todas as 6 movimenta√ß√µes funcionam corretamente</li>
                        <li><strong>Status:</strong> Status correto √© aplicado no banco de dados</li>
                        <li><strong>Interface:</strong> Estado local √© atualizado imediatamente</li>
                        <li><strong>Feedback:</strong> Modal mostra resultados detalhados</li>
                        <li><strong>Restri√ß√µes:</strong> "EM SERVI√áO" bloqueia movimenta√ß√£o</li>
                        <li><strong>M√∫ltiplas:</strong> Suporte a m√∫ltiplas ordens selecionadas</li>
                        <li><strong>Logs:</strong> Rastreamento completo das opera√ß√µes</li>
                    </ul>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Pr√≥ximos Passos</h2>
                
                <div class="debug-section">
                    <h4>üìã Ap√≥s os Testes</h4>
                    <ul>
                        <li>1. Testar todas as 6 movimenta√ß√µes permitidas</li>
                        <li>2. Verificar se restri√ß√µes funcionam</li>
                        <li>3. Confirmar se status correto √© aplicado</li>
                        <li>4. Verificar se modal funciona corretamente</li>
                        <li>5. Testar com m√∫ltiplas ordens</li>
                        <li>6. Reportar resultados dos testes</li>
                        <li>7. Se necess√°rio, fazer ajustes adicionais</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function openDevTools() {
            alert('Para abrir o DevTools:\n\nChrome/Edge: F12 ou Ctrl+Shift+I\nFirefox: F12 ou Ctrl+Shift+I\nSafari: Cmd+Option+I');
        }
        
        // Simular logs de teste
        console.log('üîÑ P√°gina de teste de drag and drop entre se√ß√µes carregada');
        console.log('üìã Funcionalidades implementadas:');
        console.log('1. PREVISTO PARA HOJE ‚Üí PREVISTO PARA AMANH√É');
        console.log('2. PREVISTO PARA AMANH√É ‚Üí PREVISTO PARA HOJE');
        console.log('3. PREVISTO PARA AMANH√É ‚Üí FUTURA');
        console.log('4. PREVISTO PARA HOJE ‚Üí FUTURA');
        console.log('5. FUTURA ‚Üí PREVISTO PARA HOJE');
        console.log('6. FUTURA ‚Üí PREVISTO PARA AMANH√É');
        console.log('');
        console.log('üß™ Para testar:');
        console.log('1. Abra o frontend em http://localhost:3000');
        console.log('2. Aplique filtros para colunas de t√©cnicos');
        console.log('3. Selecione ordens em uma se√ß√£o');
        console.log('4. Arraste para outra se√ß√£o do mesmo t√©cnico');
        console.log('5. Verifique se modal aparece e ordens s√£o movidas');
        console.log('6. Teste todas as 6 movimenta√ß√µes permitidas');
    </script>
</body>
</html> 